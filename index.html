<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Descubre tu Acompañamiento Ideal</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&family=Source+Serif+4:opsz,wght@8..60,400;700&display=swap" rel="stylesheet">
    
    <style>
        /* Custom styles and font setup */
        body {
            font-family: 'Open Sans', sans-serif;
        }
        .font-serif-display {
            font-family: 'Source Serif 4', serif;
        }
        /* Screen transitions */
        .screen {
            transition: opacity 0.5s ease-in-out;
        }
        .hidden {
            display: none;
            opacity: 0;
        }
        /* Fade-in animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <main id="app-container" class="relative w-full max-w-md mx-auto bg-white rounded-2xl shadow-xl p-6 md:p-8 overflow-hidden">
        <!-- All screens will be injected here by JavaScript -->
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            const appContainer = document.getElementById('app-container');
            let appState = {
                screen: 'welcome',
                quizStep: 'start',
                userChoices: {},
                resultKey: null,
                flowType: null,
                activeTest: null,
                accordionShouldBeOpen: false,
            };

            // --- DATA MODELS ---
            const quizData = {
                'start': {
                    question: 'Hoy necesito…',
                    options: [
                        { text: 'Resolver algo urgente que no puede esperar.', value: 'urgent' },
                        { text: 'Avanzar hacia mis metas con apoyo constante.', value: 'long-term' },
                        { text: 'Aclarar qué quiero lograr y por dónde empezar.', value: 'tests' },
                    ],
                    next: (choice) => {
                        if (choice === 'urgent') return 'urgent_refine';
                        if (choice === 'long-term') return 'long-term_refine';
                        if (choice === 'tests') return 'result';
                        return 'start';
                    }
                },
                'urgent_refine': {
                    question: '¿Tienes claro el resultado que quieres?',
                    options: [
                        { text: 'Sí, totalmente claro.', value: 'chispa' },
                        { text: 'Más o menos, necesito afinarlo.', value: 'chispa' },
                    ],
                    next: () => 'result'
                },
                'long-term_refine': {
                    question: '¿Podrías dedicar unas horas a la semana en los próximos meses?',
                    options: [
                        { text: 'Sí, sin problema.', value: 'enciende' },
                        { text: 'No estoy seguro por mi agenda.', value: 'chispa' },
                    ],
                    next: () => 'result'
                }
            };

            const resultsData = {
                'chispa': {
                    title: 'Claridad en 90 minutos',
                    subtitle: 'Una sesión para ordenar ideas y salir con un plan realista desde hoy.',
                    cta: 'Quiero conocer más sobre la sesión',
                    flow: 'chispa'
                },
                'enciende': {
                    title: 'Alcanzar una Meta de Alto Impacto en 9 meses',
                    subtitle: 'Un proceso 1 a 1 para sostener tu acción, enfoque y energía.',
                    cta: 'Quiero conocer más sobre el programa',
                    flow: 'enciende'
                },
                'tests': {
                    title: '¿Qué necesitas?',
                    subtitle: 'Identifica si es Coaching, Terapia, Mentoría o Consultoría',
                    cta: 'Quiero identificarlo',
                    flow: 'tests'
                }
            };

            const internalFlowsData = {
                chispa: {
                    title: "Chispa Estratégica — Sesión Única de 90 min",
                    subtitle: "Sales con un plan de acción claro y realista desde hoy, para tomar decisiones con foco, motivación y confianza.",
                    cta: 'Reservar mi sesión de 90 min ahora',
                    includes: [
                        '90 minutos en vivo (virtual)',
                        'Coaching + consultoría estratégica',
                        'Minuta con plan de acción personalizado',
                        'Opción de seguimiento (60 min)',
                        'Con Costo — cupo: 3 sesiones/semana'
                    ],
                    description: 'Ideal si tienes claro lo que quieres pero te sientes disperso o estancado. Saldrás con ideas ordenadas, prioridades definidas y pasos inmediatos para avanzar.'
                },
                enciende: {
                    title: "Enciende tu Dirección — Proceso 1 a 1 de 9 meses",
                    subtitle: "Transforma tu forma de trabajar y alcanza una Meta de Alto Impacto con acompañamiento sostenido, claridad y energía renovada.",
                    cta: 'Agendar mi videollamada gratuita',
                    includes: [
                        '9 meses de acompañamiento',
                        'Fases de activación y consolidación',
                        'Plan personalizado para tu meta',
                        'Entrenamiento mental y seguimiento',
                        'Videollamada inicial gratuita — espacios limitados'
                    ],
                    description: 'Pensado para un cambio profundo que no se apaga a las semanas. Recuperarás energía, disciplina y dirección para ejecutar una meta ambiciosa sin perder equilibrio personal.'
                },
                tests: {
                    title: "Aclaremos qué necesitas",
                    steps: [
                        {
                            title: '',
                            isFinal: true,
                            customCta: () => (
                                `<div class="w-full space-y-8 text-center">
                                    <div>
                                        <p class="mb-2 text-gray-800 font-serif-display text-xl">¿Necesitas sanar o avanzar?</p>
                                        <button data-test-type="terapia-coaching" class="w-full text-center px-6 py-4 rounded-lg shadow-md transition-transform transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 bg-[#f9442c] text-white font-semibold">
                                            Explorar Terapia o Coaching
                                        </button>
                                    </div>
                                    <div>
                                        <p class="mb-2 text-gray-800 font-serif-display text-xl">¿Tu prioridad es inspiración, guía táctica o claridad interna?</p>
                                        <button data-test-type="mentoria-coaching" class="w-full text-center px-6 py-4 rounded-lg shadow-md transition-transform transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 bg-[#f9442c] text-white font-semibold">
                                            Explorar Mentoría, Consultoría o Coaching
                                        </button>
                                    </div>
                                </div>`
                            )
                        }
                    ]
                }
            };
            
            // --- RENDER FUNCTIONS ---
            function render() {
                appContainer.innerHTML = ''; // Clear previous content
                let content = '';

                if (appState.activeTest === 'terapia-coaching') {
                    // This would be the TerapiaCoachingTest component logic, simplified here
                    content = `<div>Terapia/Coaching Test Placeholder <button class="js-exit-test">Exit</button></div>`;
                } else if (appState.activeTest === 'mentoria-coaching') {
                    // This would be the MentoriaCoachingTest component logic, simplified here
                    content = `<div>Mentoria/Coaching Test Placeholder <button class="js-exit-test">Exit</button></div>`;
                } else {
                    switch (appState.screen) {
                        case 'welcome':
                            content = renderWelcomeScreen();
                            break;
                        case 'quiz':
                            content = renderQuizScreen();
                            break;
                        case 'result':
                            content = renderResultScreen();
                            break;
                        case 'flow':
                            content = renderInternalFlow();
                            break;
                    }
                }
                appContainer.innerHTML = content;
                addEventListeners();
            }

            function renderWelcomeScreen() {
                return `
                    <div class="text-center animate-fade-in">
                        <img src="https://raw.githubusercontent.com/daniel-hd-91-mx/c-acom/main/Logo-Dan-Hernandez_Imagotipo-BLACK.png" alt="Logo" class="w-[250px] mx-auto mb-8" />
                        <h1 class="font-serif-display text-3xl md:text-4xl font-bold text-gray-800">Descubre el Acompañamiento Profesional que Necesitas</h1>
                        <p class="mt-4 text-gray-600">En menos de 2 minutos sabrás si lo que necesitas es Coaching Profesional o algo diferente. Y si es Coaching, te mostraré el servicio perfecto para ti. Si no, te daré recursos para avanzar.</p>
                        <img src="https://raw.githubusercontent.com/daniel-hd-91-mx/c-acom/main/acom.png" alt="Acompañamiento Profesional" class="w-[300px] mx-auto my-8" />
                        <button id="start-btn" class="w-full text-center px-6 py-4 rounded-lg shadow-md transition-transform transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 bg-[#f9442c] text-white font-semibold text-lg">
                            Comenzar ahora
                        </button>
                        <p class="mt-4 text-sm text-gray-500">Más rápido que decidir tu próximo café.</p>
                    </div>`;
            }

            function renderQuizScreen() {
                const currentQuestion = quizData[appState.quizStep];
                const optionsHtml = currentQuestion.options.map((option, index) => `
                    <button 
                        data-value="${option.value}"
                        data-next="${currentQuestion.next(option.value)}"
                        class="js-quiz-option w-full text-left px-6 py-4 rounded-lg shadow-md transition-all duration-200 cursor-pointer bg-white text-gray-700 border border-gray-300 hover:bg-gray-100 hover:border-[#f9442c] focus:outline-none focus:ring-2 focus:ring-[#f9442c] focus:ring-offset-2">
                        ${option.text}
                    </button>
                `).join('');

                return `
                    <div class="animate-fade-in">
                        <h2 class="font-serif-display text-2xl font-bold text-gray-800 mb-6 text-center">${currentQuestion.question}</h2>
                        <div class="space-y-4">${optionsHtml}</div>
                    </div>`;
            }

            function renderResultScreen() {
                 const result = resultsData[appState.resultKey];
                 if (!result) {
                     appState.screen = 'welcome';
                     render();
                     return;
                 }
                const otherOptions = Object.keys(resultsData)
                    .filter(key => key !== appState.resultKey)
                    .map(key => ({ key, ...resultsData[key] }));

                return `
                    <div class="text-center animate-fade-in">
                         <img src="https://raw.githubusercontent.com/daniel-hd-91-mx/c-acom/main/Logo-Dan-Hernandez_Imagotipo-BLACK.png" alt="Logo" class="w-[150px] mx-auto mb-6" />
                        <div class="mb-6">
                            <h2 class="font-serif-display text-2xl font-bold text-gray-800">${result.title}</h2>
                            <p class="mt-2 text-gray-600">${result.subtitle}</p>
                        </div>
                        <button data-flow-type="${result.flow}" class="js-start-flow w-full text-center px-6 py-4 rounded-lg shadow-md transition-transform transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 bg-[#f9442c] text-white font-semibold">
                            ${result.cta}
                        </button>
                        
                        <div class="mt-8 pt-6 border-t">
                            <button id="toggle-accordion" class="w-full flex justify-between items-center text-left py-2">
                                <h3 class="text-sm font-semibold uppercase tracking-wider text-gray-500">Otras opciones</h3>
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" class="w-5 h-5 text-gray-500 transition-transform duration-300"><polyline points="6 9 12 15 18 9"></polyline></svg>
                            </button>
                            <div id="accordion-content" class="mt-3 space-y-3 animate-fade-in ${appState.accordionShouldBeOpen ? '' : 'hidden'}">
                                ${otherOptions.map(option => `
                                    <button data-flow-type="${option.flow}" class="js-start-flow text-left w-full p-3 rounded-lg hover:bg-gray-100 transition-colors">
                                        <p class="font-serif-display font-semibold text-gray-800">${option.title.split('.')[0]}.</p>
                                        <p class="text-sm text-gray-600">${option.subtitle}</p>
                                    </button>
                                `).join('')}
                            </div>
                        </div>
                        <button id="reset-btn" class="mt-6 text-sm text-gray-500 hover:text-[#f9442c]">Empezar de nuevo</button>
                    </div>
                `;
            }

            function renderInternalFlow() {
                const flowData = internalFlowsData[appState.flowType];
                const { title, subtitle, cta, includes, description } = flowData;

                return `
                    <div class="animate-fade-in">
                         <button id="back-to-result" class="flex items-center text-sm text-gray-500 hover:text-[#f9442c] mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" class="w-5 h-5 mr-2"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
                            Regresar
                        </button>
                        <div class="text-center">
                            <h2 class="font-serif-display text-2xl font-bold text-gray-800">${title}</h2>
                            <p class="mt-2 text-gray-600">${subtitle}</p>
                            
                            <div class="mt-8">
                                <button id="flow-cta" class="w-full text-center px-6 py-4 rounded-lg shadow-md transition-transform transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 bg-[#f9442c] text-white font-semibold">
                                    ${cta}
                                </button>
                            </div>

                            <div class="mt-6 pt-6 border-t text-left">
                                <ul class="space-y-3 text-gray-600">
                                    ${includes.map(item => `
                                        <li class="flex items-start">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round" class="w-6 h-6 text-[#f9442c] mr-3 mt-1 flex-shrink-0"><polyline points="20 6 9 17 4 12"></polyline></svg>
                                            <span>${item}</span>
                                        </li>
                                    `).join('')}
                                </ul>
                                <p class="mt-4 text-gray-600">${description}</p>
                            </div>
                        </div>
                    </div>
                `;
            }


            // --- EVENT HANDLING ---
            function addEventListeners() {
                const startBtn = document.getElementById('start-btn');
                if (startBtn) startBtn.addEventListener('click', () => {
                    appState.screen = 'quiz';
                    render();
                });

                document.querySelectorAll('.js-quiz-option').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const value = btn.dataset.value;
                        const next = btn.dataset.next;
                        appState.userChoices[appState.quizStep] = value;
                        if (next === 'result') {
                            appState.resultKey = value;
                            appState.screen = 'result';
                        } else {
                            appState.quizStep = next;
                        }
                        render();
                    });
                });
                
                document.querySelectorAll('.js-start-flow').forEach(btn => {
                    btn.addEventListener('click', () => {
                        appState.flowType = btn.dataset.flowType;
                        appState.screen = 'flow';
                        render();
                    });
                });

                const resetBtn = document.getElementById('reset-btn');
                if(resetBtn) resetBtn.addEventListener('click', () => {
                    appState = { screen: 'welcome', quizStep: 'start', userChoices: {}, resultKey: null, flowType: null, activeTest: null, accordionShouldBeOpen: false };
                    render();
                });
                
                const backToResultBtn = document.getElementById('back-to-result');
                if(backToResultBtn) backToResultBtn.addEventListener('click', () => {
                     appState.screen = 'result';
                     appState.flowType = null;
                     render();
                });

                const flowCta = document.getElementById('flow-cta');
                if(flowCta) flowCta.addEventListener('click', handleNextFlowStep);

                const accordionBtn = document.getElementById('toggle-accordion');
                if(accordionBtn) accordionBtn.addEventListener('click', () => {
                    const content = document.getElementById('accordion-content');
                    content.classList.toggle('hidden');
                    accordionBtn.querySelector('h3').classList.toggle('text-[#f9442c]');
                    accordionBtn.querySelector('h3').classList.toggle('text-gray-500');
                });

            }

            function handleNextFlowStep() {
                 if (appState.flowType === 'chispa') {
                    window.open('https://tr.ee/KGIHZE', '_blank', 'noopener,noreferrer');
                } else if (appState.flowType === 'enciende') {
                    window.open('https://tr.ee/QiH9Uw', '_blank', 'noopener,noreferrer');
                }
            }

            // --- INITIAL RENDER ---
            render();
        });
    </script>
</body>
</html>

